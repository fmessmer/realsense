--- postinst	2019-06-08 03:12:28.000000000 +0200
+++ postinst.1	2019-10-21 11:45:48.457384400 +0200
@@ -25,14 +25,16 @@
 OLDUDEV="/etc/udev/rules.d/99-realsense-libusb.rules"
 
 # Are we running in a Docker Environment?
-docker_cnt=$(awk '$2 == "(1,"' /proc/1/sched  | wc -l)
+# docker_cnt=$(awk '$2 == "(1,"' /proc/1/sched  | wc -l)
+docker_cnt=$(awk -F/ '$2 == "docker"' /proc/1/cgroup  | wc -l)
 # docker_cnt == 0 we are in a docker environment
 
 case "$1" in
 
   configure)
     # Set FORCE_UDEV_IN_DOCKER to non-empty to override
-    if [ ${docker_cnt} -eq 0 -a -z "${FORCE_UDEV_IN_DOCKER}" ]
+    # fix: if docker_cnt > 0 was -eq
+    if [ ${docker_cnt} -gt 0 -a -z "${FORCE_UDEV_IN_DOCKER}" ]
     then
       echo "INFO: Docker environment not supported for udevadm; skipping."
     else
@@ -59,7 +61,8 @@
     fi
 
     # Set FORCE_DKMS_IN_DOCKER to non-empty to override
-    if [ ${docker_cnt} -eq 0 -a -z "${FORCE_DKMS_IN_DOCKER}" ]
+    # fix: if docker_cnt > 0 was -eq
+    if [ ${docker_cnt} -gt 0 -a -z "${FORCE_DKMS_IN_DOCKER}" ]
     then
       echo "INFO: Docker environment not supported for DKMS; skipping."
     else
